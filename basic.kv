#:include rules.kv
MDScreen:
    title: app.wrd.progname
    MDToolbar:
        id: tb_upper
        title: app.wrd.progname
        type: "top"
        left_action_items: [["menu", lambda x: app.callback()]]
        right_action_items: [["exit-to-app", lambda x: app.stop()]]
        md_bg_color: [.99,.87,.45,1] # app.theme_cls.accent_color
        text_color: app.theme_cls.accent_color # [.1,.1,.3,1]#
        specific_text_color: [.1, .1, .3, 1]#
        elevation: 5
        pos_hint: {"top": 1, "center_x": .5}

    MDBoxLayout:
        id: bx_main # Основной бокс в котором расположено все кроме тулбара
        size_hint_y: None
        size_hint_y: 1.0 - tb_upper.height/root.height

        MDGridLayout: # корневой виджет включающий два основных горизонтальных элемента
            id: main_container
            rows: 2 #для вертикальной ориентации - смартфонов, этот параметр изменяется при запуске для планшетов и ПК
            cols: 1
            padding: dp(10)
            spacing: dp(10)

# ---------- 1) ЛЕВЫЙ ИЛИ ВЕРХНИЙ БЛОК: --------- РЕЗУЛЬТАТЫ
            MDBoxLayout: # ОСНОВНАЯ карточка или бокс
                id: cd_first
                #pos_hint: {"center_x": .5, "top": 1}
                #elevation: 3
                orientation: "vertical"
                md_bg_color: [1, 1, 1, 1]
                padding: [dp(5), dp(5), dp(5), dp(5)]

            # КАРТОЧКА С БАЗОВОЙ ОЦЕНКОЙ ИМТ: РОСТ-ВЕС
                MDBoxLayout: # MDCard: # <Cbmi@MDCard>: ОСНОВНАЯ карточка или бокс
                    orientation: "vertical"
                    padding: [dp(5), dp(5), dp(5), dp(5)]
                    spacing: dp(10)
                    md_bg_color: [.99, .99, .98, 1]
                    size_hint: None, None
                    size_hint_x: 1
                    height: self.minimum_height
                    pos_hint: {"x": 0, "y": 1}

            # ТАЛИЯ, ЦЕНТРАЛЬНОЕ ОЖИРЕНИЕ       -----------------------------------------------
                    MDBoxLayout: # КАЧЕСТВЕННАЯ ОЦЕНКА
                        size_hint_y: None
                        height: self.minimum_height
                        pos_hint: None, None
                        pos_hint: {"center_x": .5, "top": 1}
                        orientation: "vertical"
                        md_bg_color: app.col.bg_pale
                        padding: [dp(10), dp(10), dp(10), dp(10)]
                        spacing: dp(5)

                        Bstandart: # ЗАГОЛОВОК Тип фигуры
                            padding: [dp(20), dp(20), dp(20), dp(20)]
                            L2left:
                                id: l_TitleWaist_text
                                text: app.wrd.wst_title
                            L2right:
                                id: l_TitleWaist_resVerb
                                text: ""

                        Bsubrow:
                            Lstandart: # Обхват талии
                                id: l_wst_indic_text
                                text: app.wrd.wst_indic
                            GrBar2:
                                LBar:
                                    id: l_wst_indic_boxL  #
                                LBar:
                                    id: l_wst_indic_boxC  # правый сегмент полосы - шкалы переплаты - ПЕРЕПЛАТА
                                LBar:
                                    id: l_wst_indic_boxR  #
                            Lright2:
                                id: l_wst_indic_norm

                        Bsubrow:  # Талия - к бедрам
                            Lstandart:
                                id: l_wh_indic_text
                                text: app.wrd.wh_full
                            GrBar2:
                                LBar:
                                    id: l_wh_indic_boxL  #
                                LBar:
                                    id: l_wh_indic_boxC  # правый сегмент полосы - шкалы переплаты - ПЕРЕПЛАТА
                                LBar:
                                    id: l_wh_indic_boxR  #
                            Lright2:
                                id: l_wh_indic_norm

                        Bsubrow: # Талия/рост
                            Lstandart:
                                id: l_whh_indic_text
                                text: app.wrd.whh
                            GrBar2:
                                LBar:
                                    id: l_whh_indic_boxL  # левый сегмент полосы - шкалы переплаты - ТЕЛО ДОЛГА
                                LBar:
                                    id: l_whh_indic_boxC  # правый сегмент полосы - шкалы переплаты - ПЕРЕПЛАТА
                                LBar:
                                    id: l_whh_indic_boxR  # правый сегмент полосы - шкалы переплаты - ПЕРЕПЛАТА
                            Lright2:
                                id: l_whh_indic_norm


                # ТИП ФИГУРЫ       -----------------------------------------------
                    MDBoxLayout: # КАЧЕСТВЕННАЯ ОЦЕНКА
                        size_hint_y: None
                        height: self.minimum_height
                        pos_hint: None, None
                        pos_hint: {"center_x": .5, "top": 1}
                        orientation: "vertical"
                        md_bg_color: app.col.bg_pale
                        padding: [dp(10), dp(10), dp(10), dp(10)]
                        spacing: dp(5)

                        Bstandart:
                            padding: [dp(20), dp(20), dp(20), dp(20)]
                            L2left:
                                id: l_bodytype_text
                                text: app.wrd.bodytype
                            L2right:
                                id: l_bodytype_resVerb
                                text: ""

                        Bstandart: # Тип фигуры
                            spacing: dp(0)
                            MDfigure:
                                id: bfg_1
                                icon: "timer-sand-empty"
                            MDfigure:
                                id: bfg_2
                                icon: "timer-sand"
                            MDfigure:
                                id: bfg_3
                                icon: "timer-sand"
                                canvas.before:
                                    PushMatrix
                                    Rotate:
                                        angle: 180
                                        origin: self.center
                                canvas.after:
                                    PopMatrix
                            MDfigure:
                                id: bfg_4
                                icon: "triangle"
                            MDfigure: # перевернутый треугольник
                                id: bfg_5
                                icon: "triangle"
                                canvas.before:
                                    PushMatrix
                                    Rotate:
                                        angle: 180
                                        origin: self.center
                                canvas.after:
                                    PopMatrix
                            MDfigure:
                                id: bfg_6
                                icon: "crop-portrait"
                            MDfigure:
                                id: bfg_7
                                icon: "cards-diamond"

                    MDBoxLayout: # КАЧЕСТВЕННАЯ ОЦЕНКА
                        size_hint_y: None
                        height: self.minimum_height
                        pos_hint: None, None
                        pos_hint: {"center_x": .5, "top": 1}
                        orientation: "vertical"
                        md_bg_color: app.col.bg_pale
                        padding: [dp(10), dp(10), dp(10), dp(30)]
                        spacing: dp(5)

                        Bnopad: # Простой ИМТ
                            padding: [dp(20), dp(20), dp(20), dp(20)]
                            L2left:
                                id: l_bmi_text
                                text: app.wrd.bmifull
                            L2right:
                                id: l_bmi_resText
                                text: ""

                    # ШКАЛА -----------------------------------------------------------
                        Bnopad: # -- СТРЕЛКА НАВИГАЦИИ
                            padding: [dp(20), dp(10), dp(0), dp(20)]

                            Bnopad:
                                id: b_navarrow
                                orientation: "horizontal"

                                Bnopad:
                                    id: bmi_pos_L
                                    padding: [dp(-20), dp(0), dp(0), dp(0)] # 20 - паддинг - 5 ширина значка
                                    size_hint: .5, 1
                                    MDIcon:
                                        id: i_navarrow
                                        icon: "navigation-outline"
                                        canvas.before:
                                            PushMatrix
                                            Rotate:
                                                angle: 180
                                                origin: self.center
                                        canvas.after:
                                            PopMatrix
                                        theme_text_color: "Custom"
                                        color: app.col.selected

                                Bnopad:
                                    id: bmi_pos_R
                                    size_hint: .5,1


                        BMIscale: #   Шкала BMI -----------------------------------------------------
                        BMIhints: # ТЕКСТОВЫЕ ПОДПИСИ К ШКАЛЕ ---------------------------------------


# ---------- 2) ПРАВЫЙ ИЛИ НИЖНИЙ БЛОК: --------- ВВОД ПАРАМЕТРОВ
            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                scroll_type: ['content','bars']

                MDBoxLayout:
                    orientation: "vertical"
                    size_hint_y: None
                    height: self.minimum_height

                    MDBoxLayout:#Bstandart: # Верхняя полоса настроек
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'horizontal'
                        padding: [dp(0),dp(0),dp(0),dp(0)]
                        spacing: dp(10)

                        MDBoxLayout:
                            adaptive_width: True
                            spacing: dp(0)
                            padding: [dp(-10),dp(0),dp(0),dp(0)]
                            pos_hint: {"left": 0,"top": 1}
                            MDIconButton:
                                id: ic_male
                                icon: "human-male"
                                adaptive_width: True
                                user_font_size: dp(24)
                                theme_text_color: "Custom"
                                text_color: app.col.lightray
                                padding: [dp(0),dp(0),dp(0),dp(0)]
                                pos_hint: {"left": 0, "top": 1}
                                on_release: app.choose_gender(True)
                            MDIconButton:
                                id: ic_female
                                icon: "human-female"
                                adaptive_width: True
                                user_font_size: dp(24)
                                theme_text_color: "Custom"
                                text_color: app.col.lightray
                                padding: [dp(0),dp(0),dp(0),dp(0)]
                                pos_hint: {"left": 0, "top": 1}
                                on_release: app.choose_gender(False)

                        TInput:
                            id: i_birthyear
                            adaptive_width: True
                            pos_hint: {"center_x": 0.5,"top": 1}
                            hint_text: "год рождения"
                            text: ""
                            input_filter: 'int'
                            max_text_length: 4
                            helper_text: "введите четырехзначное число"
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_birthyear')
                        TInput:
                            id: i_age
                            adaptive_width: True
                            pos_hint: {"center_x": 0.5,"top": 1}
                            hint_text: "возраст"
                            text: ""
                            input_filter: 'int'
                            max_text_length: 3
                            helper_text: "введите четырехзначное число"
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_age')

                        MDBoxLayout:
                            spacing: dp(5)
                            adaptive_width: True
                            MDRaisedButton:
                                id: b_metric
                                text: "метрические"
                                font_style: "Body2"
                                halign: "center"
                                md_bg_color: app.col.bg_light
                                #line_color: app.c_selected
                                theme_text_color: "Custom"
                                text_color: app.col.selected
                                pos_hint: {"right": 1, "top": 1}
                                elevation: 7
                                on_press: app.choose_metrics(True)
                            MDRaisedButton:
                                id: b_imperial
                                text: "имперские"
                                font_style: "Body2"
                                halign: "center"
                                md_bg_color: app.col.bg_medium # 1, 1, 1, 1 #
                                theme_text_color: "Custom"
                                text_color: app.col.gray
                                pos_hint: {"right": 1, "top": 1}
                                elevation: 4
                                on_press: app.choose_metrics(False)


#---------------------- СЛАЙДЕР
                    Bstandart: # СЛАЙДЕР
                        id: b_slider
                        MDSlider:
                            id: slider
                            size_hint_y: None
                            height: dp(40) #"30dp"
                            min: 50
                            max: 260
                            value: 170
                            #color: app.theme_cls.accent_color
                            value_track: True
                            value_track_color: [1, 0, 0, 1]
                            step: 1 # Шаг изменения шкалы
                            value_track_color: [1, 0, 0, 1]
                            value_track_width: dp(20)

#---------------------- ВВОД ПОКАЗАТЕЛЕЙ

                    Bstandart: # РОСТ
                        Lstandart:
                            id: l_hheight
                            text: "Рост"
                            size_hint_x: .5
                        TInput: #
                            id: i_hheight
                            hint_text: ""
                            text: "170"
                            input_filter: 'float'
                            max_text_length: 3
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_hheight')

                    Bstandart: # ВЕС
                        pos_hint: {"right": 1,"top": 1}
                        Lstandart:
                            id: l_weight
                            text: "Вес"
                            size_hint_x: .5
                        TInput: #
                            id: i_weight
                            hint_text: ""
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_weight')

                    Bstandart: # Обхват кисти
                        Lstandart:
                            id: l_wreck
                            text: "Запястье"
                            size_hint_x: .5
                        TInput: #
                            id: i_wreck
                            hint_text: "обхват запястья"
                            text: "19"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_wreck')


                    Bstandart: # Обхват груди
                        Lstandart:
                            id: l_chest
                            text: "Грудь"
                            size_hint_x: .5
                        TInput: #
                            id: i_chest
                            hint_text: "обхват грудной клетки"
                            text: "90"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')

                    Bstandart: # Обхват талии
                        Lstandart:
                            id: l_waist
                            text: "Талия"
                            size_hint_x: .5
                        TInput: #
                            id: i_waist
                            hint_text: "обхват талии"
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_waist')

                    Bstandart: # Обхват талии
                        Lstandart:
                            id: l_hip
                            text: "Бедра"
                            size_hint_x: .5
                        TInput: #
                            id: i_hip
                            hint_text: "обхват бедер"
                            text: "90"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_hip')
#-------------- ДЕТАЛЬНЫЕ ДАННЫЕ
                    Bstandart: # ШЕЯ
                        Lstandart:
                            id: l_neck
                            text: "Шея"
                            size_hint_x: .5
                        TInput: #
                            id: i_neck
                            hint_text: "обхват шеи"
                            text: "36"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_neck')

                    Bstandart: # Рука
                        Lstandart:
                            id: l_arm
                            text: "Плечо(рука)"
                            size_hint_x: .5
                        TInput: #
                            id: i_armR
                            hint_text: ""
                            text: "30"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')
                        TInput: #
                            id: i_armL
                            hint_text: ""
                            text: "30"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')

                    Bstandart: # Рука
                        Lstandart:
                            id: l_forearm
                            text: "Предплечья"
                            size_hint_x: .5
                        TInput: #
                            id: i_forearmR
                            hint_text: ""
                            text: "28"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')
                        TInput: #
                            id: i_forearmL
                            hint_text: ""
                            text: "28"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')
#
#
#
##        ScreenManager:
##            MDScreen:
##                MDToolbar:
##                    title: "Navigation Drawer"
##                    elevation: 10
##                    pos_hint: {"top": 1}
##                    md_bg_color: [.91,.89,.75,1]#get_color_from_hex("#e7e4c0")
##                    specific_text_color: [.29,.29,.22,1] #get_color_from_hex("#4a4939")
##                    left_action_items:
##                        [['menu', lambda x: nav_drawer.set_state("open")]]
##
##
##        MDNavigationDrawer:
##            id: nav_drawer
##            md_bg_color: [.97,.96,.91,1] # get_color_from_hex("#f7f4e7")
##            ContentNavigationDrawer: