#:include card.kv

MDScreen:
    title: "Калькулятор фигуры"
    MDToolbar:
        id: tb_upper
        title: "Калькулятор фигуры"
        type: "top"
        left_action_items: [["menu", lambda x: app.callback()]]
        right_action_items: [["exit-to-app", lambda x: app.stop()]]
        md_bg_color: [.99,.87,.45,1] # app.theme_cls.accent_color
        text_color: app.theme_cls.accent_color # [.1,.1,.3,1]#
        specific_text_color: [.1,.1,.3,1]#
        elevation: 5
        pos_hint: {"top": 1, "center_x": .5}

    MDBoxLayout:
        id: bx_main # Основной бокс в котором расположено все кроме тулбара
        size_hint_y: None
        size_hint_y: 1.0 - tb_upper.height/root.height

        MDGridLayout: # корневой виджет включающий два основных горизонтальных элемента
            id: main_container
            rows: 2 #для вертикальной ориентации - смартфонов, этот параметр изменяется при запуске для планшетов и ПК
            cols: 1
            padding: dp(10)
            spacing: dp(10)

# ---------- 1) ЛЕВЫЙ ИЛИ ВЕРХНИЙ БЛОК: --------- РЕЗУЛЬТАТЫ
            MDBoxLayout: # ОСНОВНАЯ карточка или бокс
                id: cd_first
                #pos_hint: {"center_x": .5, "top": 1}
                #elevation: 3
                orientation: "vertical"
                md_bg_color: [1, 1, 1, 1]
                padding: [dp(10), dp(10), dp(10), dp(10)]

            # КАРТОЧКА С БАЗОВОЙ ОЦЕНКОЙ ИМТ: РОСТ-ВЕС
                MDBoxLayout: # MDCard: # <Cbmi@MDCard>: ОСНОВНАЯ карточка или бокс
                    padding: [dp(10), dp(10), dp(10), dp(10)]
                    spacing: dp(5)
                    md_bg_color: [.98, .96, .91, 1]
                    size_hint: None, None
                    size_hint_x: 1
                    height: self.minimum_height
                    pos_hint: {"x": 0, "y": 1}
                    #adaptive_height: True
                    #elevation: 6

                    MDBoxLayout: # КАЧЕСТВЕННАЯ ОЦЕНКА
                        size_hint_y: None
                        height: self.minimum_height
                        pos_hint: None, None
                        pos_hint: {"center_x": .5, "top": 1}
                        orientation: "vertical"
                        padding: [dp(15), dp(15), dp(15), dp(15)]
                        spacing: dp(5)

                # ПЕРВАЯ ТЕКСТОВАЯ СТРОКА      -----------------------------------------------
                        Bnopad: # Заголовок
                            id: b_main_title
                            padding: [dp(0), dp(0), dp(0), dp(20)]
                            Lstandart:
                                id: l_BMI_text
                                text: "Вес (для обычного человека)"
                                font_style: "H6"
                                halign: "left"
                                valign: "bottom"

                        Bnopad: # Простой ИМТ
                            id: b_main_result
                            padding: [dp(0), dp(0), dp(0), dp(20)]
                            Lleft:
                                id: l_iweight_text
                                text: "Индекс массы тела"
                            Lcenter:
                                id: l_iweight_resVerb
                                text: "норма"
                            Lright:
                                id: l_iweight_resText
                                text: "90/10"

                        Bnopad: # Уточненный ИМТ
                            id: b_main_result
                            padding: [dp(0), dp(0), dp(0), dp(20)]
                            Lleft:
                                id: l_iweight_text
                                text: "Уточненный расчет"
                            Lcenter:
                                id: l_iweight_resVerb
                                text: "норма"
                            Lright:
                                id: l_iweight_resText
                                text: "9.0/10"

                        Bnopad: # Телосложение
                            id: b_main_result
                            padding: [dp(0), dp(0), dp(0), dp(20)]
                            Lleft:
                                id: l_iweight_text
                                text: "Телосложение"
                            Lcenter:
                                id: l_iweight_resVerb
                                text: "норма"
                            Lright:
                                id: l_iweight_resText
                                text: "9.0/10"


                    # ШКАЛА -----------------------------------------------------------
                        BMIhints: # ТЕКСТОВЫЕ ПОДПИСИ К ШКАЛЕ ---------------------------------------
                        BMIscale: #   Шкала BMI -----------------------------------------------------
                        # -- СТРЕЛКА НАВИГАЦИИ
                        Bnopad: # Шкала BMI
                            padding: [dp(-10), dp(0), dp(-10), dp(0)]
                            Bnopad:
                                padding: [dp(0), dp(0), dp(0), dp(0)]
                                MDIcon:
                                    icon: "navigation"
                                    theme_text_color: "Custom"
                                    color: app.col.selected
                                    #padding: [dp(0), dp(0), dp(0), dp(0)]
                                    halign: "left"

                        Bnopad: # ИМТ
                            id: b_main_result
                            padding: [dp(0), dp(20), dp(0), dp(20)]
                            Lstandart:
                                id: l_iweight_text
                                text: "Индекс массы тела (ИМТ)"
                                font_style: "Body2"
                                halign: "left"
                                valign: "bottom"
                                size_hint_x: .77
                            Lstandart:
                                id: l_iweight_resText
                                text: "24"
                                font_style: "Body2"
                                halign: "right"
                                valign: "bottom"
                                size_hint_x: .33

                        Bnopad: # ТОЧНОСТЬ
                            padding: [dp(0), dp(0), dp(0), dp(20)]
                            Lstandart:
                                id: l_precise_t1
                                text: "Точность:"
                                font_style: "Body2"
                                halign: "left"
                                valign: "bottom"
                                size_hint_x: .77
                            Bnopad:
                                id: b_pres_stars
                                orientation: "horizontal"
                                pos_hint: {"bottom": 0, "center_x": .5}
                                spacing: 0
                                size_hint_x: .33

                                MDIstar:
                                    id: ic_rank_0
                                MDIstar:
                                    id: ic_rank_1
                                MDIstar:
                                    id: ic_rank_2
                                MDIstar:
                                    id: ic_rank_3
                                MDIstar:
                                    id: ic_rank_4
                                MDIstar:
                                    id: ic_rank_5
                                MDIstar:
                                    id: ic_rank_6
                                MDIstar:
                                    id: ic_rank_7
                                MDIstar:
                                    id: ic_rank_8
                                MDIstar:
                                    id: ic_rank_9


# ---------- 2) ПРАВЫЙ ИЛИ НИЖНИЙ БЛОК: --------- ВВОД ПАРАМЕТРОВ
            ScrollView:
                do_scroll_x: False
                do_scroll_y: True
                scroll_type: ['content','bars']

                MDBoxLayout:
                    orientation: "vertical"
                    size_hint_y: None
                    height: self.minimum_height

                    MDBoxLayout:#Bstandart: # Верхняя полоса настроек
                        size_hint_y: None
                        height: self.minimum_height
                        orientation: 'horizontal'
                        padding: [dp(0),dp(0),dp(0),dp(0)]
                        spacing: dp(10)

                        MDBoxLayout:
                            adaptive_width: True
                            spacing: dp(0)
                            pos_hint: {"left": 0,"top": 1}
                            MDIconButton:
                                id: ic_male
                                icon: "human-male"
                                adaptive_width: True
                                user_font_size: dp(24)
                                theme_text_color: "Custom"
                                text_color: app.col.lightray
                                padding: [dp(0),dp(0),dp(0),dp(0)]
                                pos_hint: {"left": 0, "top": 1}
                                on_release: app.choose_gender(True)
                            MDIconButton:
                                id: ic_female
                                icon: "human-female"
                                adaptive_width: True
                                user_font_size: dp(24)
                                theme_text_color: "Custom"
                                text_color: app.col.lightray
                                padding: [dp(0),dp(0),dp(0),dp(0)]
                                pos_hint: {"left": 0, "top": 1}
                                on_release: app.choose_gender(False)

                        TInput:
                            id: i_age
                            adaptive_width: True
                            pos_hint: {"center_x": 0.5,"top": 1}
                            hint_text: "год рождения"
                            text: "1990"
                            input_filter: 'int'
                            max_text_length: 4
                            helper_text: "введите четырехзначное число"
                            #size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_age')

                        MDBoxLayout:
                            spacing: dp(5)
                            adaptive_width: True
                            MDRaisedButton:
                                id: b_metric
                                text: "метрические"
                                font_style: "Body2"
                                halign: "center"
                                md_bg_color: app.col.bg_light
                                #line_color: app.c_selected
                                theme_text_color: "Custom"
                                text_color: app.col.selected
                                pos_hint: {"right": 1, "top": 1}
                                elevation: 7
                                on_press: app.choose_metrics(True)
                            MDRaisedButton:
                                id: b_imperial
                                text: "имперские"
                                font_style: "Body2"
                                halign: "center"
                                md_bg_color: app.col.bg_medium # 1, 1, 1, 1 #
                                theme_text_color: "Custom"
                                text_color: app.col.gray
                                pos_hint: {"right": 1, "top": 1}
                                elevation: 4
                                on_press: app.choose_metrics(False)


#---------------------- СЛАЙДЕР
                    Bstandart: # СЛАЙДЕР
                        id: b_slider
                        MDSlider:
                            id: slider
                            size_hint_y: None
                            height: dp(40) #"30dp"
                            min: 50
                            max: 260
                            value: 170
                            #color: app.theme_cls.accent_color
                            value_track: True
                            value_track_color: [1, 0, 0, 1]
                            step: 1 # Шаг изменения шкалы
                            value_track_color: [1, 0, 0, 1]
                            value_track_width: dp(20)

#---------------------- ВВОД ПОКАЗАТЕЛЕЙ

                    Bstandart: # РОСТ
                        Lstandart:
                            id: l_hheight
                            text: "Рост"
                            size_hint_x: .5
                        TInput: #
                            id: i_hheight
                            hint_text: ""
                            text: "170"
                            input_filter: 'float'
                            max_text_length: 3
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_hheight')

                    Bstandart: # ВЕС
                        pos_hint: {"right": 1,"top": 1}
                        Lstandart:
                            id: l_weight
                            text: "Вес"
                            size_hint_x: .5
                        TInput: #
                            id: i_weight
                            hint_text: ""
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_weight')

                    Bstandart: # Обхват кисти
                        Lstandart:
                            id: l_wreck
                            text: "Запястье"
                            size_hint_x: .5
                        TInput: #
                            id: i_wreck
                            hint_text: "обхват запястья"
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_wreck')


                    Bstandart: # Обхват груди
                        Lstandart:
                            id: l_chest
                            text: "Грудь"
                            size_hint_x: .5
                        TInput: #
                            id: i_chest
                            hint_text: "обхват грудной клетки"
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')

                    Bstandart: # Обхват талии
                        Lstandart:
                            id: l_waist
                            text: "Талия"
                            size_hint_x: .5
                        TInput: #
                            id: i_waist
                            hint_text: "обхват талии"
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_waist')

                    Bstandart: # Обхват талии
                        Lstandart:
                            id: l_hip
                            text: "Бедра"
                            size_hint_x: .5
                        TInput: #
                            id: i_hip
                            hint_text: "обхват бедер"
                            text: "90"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_hip')
#-------------- ДЕТАЛЬНЫЕ ДАННЫЕ
                    Bstandart: # ШЕЯ
                        Lstandart:
                            id: l_neck
                            text: "Шея"
                            size_hint_x: .5
                        TInput: #
                            id: i_neck
                            hint_text: "обхват шеи"
                            text: "90"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_neck')

                    Bstandart: # Рука
                        Lstandart:
                            id: l_arm
                            text: "Обхват груди"
                            size_hint_x: .5
                        TInput: #
                            id: i_armR
                            hint_text: ""
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')
                        TInput: #
                            id: i_armL
                            hint_text: ""
                            text: "70"
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')

                    Bstandart: # Рука
                        Lstandart:
                            id: l_forearm
                            text: "Предплечья"
                            size_hint_x: .5
                        TInput: #
                            id: i_forearmR
                            hint_text: ""
                            text: ""
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')
                        TInput: #
                            id: i_forearmL
                            hint_text: ""
                            text: ""
                            input_filter: 'float'
                            max_text_length: 6
                            helper_text: "Введите число > 0"
                            size_hint_x: .5
                            halign: "right"
                            on_focus: app.f_on_focus(self, 'i_chest')
#
#
#
##        ScreenManager:
##            MDScreen:
##                MDToolbar:
##                    title: "Navigation Drawer"
##                    elevation: 10
##                    pos_hint: {"top": 1}
##                    md_bg_color: [.91,.89,.75,1]#get_color_from_hex("#e7e4c0")
##                    specific_text_color: [.29,.29,.22,1] #get_color_from_hex("#4a4939")
##                    left_action_items:
##                        [['menu', lambda x: nav_drawer.set_state("open")]]
##
##
##        MDNavigationDrawer:
##            id: nav_drawer
##            md_bg_color: [.97,.96,.91,1] # get_color_from_hex("#f7f4e7")
##            ContentNavigationDrawer: